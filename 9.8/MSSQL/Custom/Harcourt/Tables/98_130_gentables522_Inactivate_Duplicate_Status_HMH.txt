/******************************************************************************************
**  Executes the qutl_insert_gentable_value  procedure
Delete duplicate Pending status and add final and proforma itemtype filtering to the correct pending status
*******************************************************************************************/

update gentables
set datadesc = 'Pendingx', datadescshort = 'Pendingx', deletestatus = 'Y', qsicode = NULL
where tableid = 522 and datacode = 20 and qsicode = 4
GO


BEGIN

  DECLARE
  @v_itemtype     INT,
  @v_usageclass   INT,
  @v_datacode INT,
  @v_datasubcode INT,
  @v_classcode INT,
  @v_error_code   INT ,
  @v_error_desc   VARCHAR(2000)

exec qutl_insert_gentable_value 522,'ProjectStatus',4,'Pending',1,1, @v_datacode OUTPUT,@v_error_code OUTPUT,@v_error_desc OUTPUT	IF @v_error_code <> 0  print 'datacode = ' + CAST(@v_datacode AS varchar)+ ', datadesc = ' + 'Pending' +', error message =' + @v_error_desc	UPDATE gentables SET datadescshort = 'Pending', alternatedesc1 = '', alternatedesc2 = '' WHERE tableid = 522  and datacode = @v_datacode	SET @V_datasubcode = 0		update gentables_ext set gentext1 = 'Pending_icon.png' where tableid =  522 AND datacode = @v_datacode	SELECT @v_classcode = datasubcode , @v_itemtype = datacode from subgentables where tableid = 550 and qsicode = 42	IF @v_classcode<> 0  BEGIN exec qutl_insert_gentablesitemtype 522, @v_datacode,  @v_datasubcode, 0,@v_itemtype, @v_classcode,@v_error_code OUTPUT, @v_error_desc OUTPUT END	IF @v_error_code <> 0  print 'datacode = ' + CAST(@v_datacode AS varchar)+ ', datasubcode = ' + CAST(@v_datasubcode AS varchar) +', error message =' + @v_error_desc	IF @v_error_code = 0 BEGIN update gentablesitemtype set sortorder = 1 where tableid = 522 AND datacode = @v_datacode AND datasubcode = @v_datasubcode AND itemtypecode = @v_itemtype AND itemtypesubcode = @v_classcode END

exec qutl_insert_gentable_value 522,'ProjectStatus',4,'Pending',1,1, @v_datacode OUTPUT,@v_error_code OUTPUT,@v_error_desc OUTPUT	IF @v_error_code <> 0  print 'datacode = ' + CAST(@v_datacode AS varchar)+ ', datadesc = ' + 'Pending' +', error message =' + @v_error_desc	UPDATE gentables SET datadescshort = 'Pending', alternatedesc1 = '', alternatedesc2 = '' WHERE tableid = 522  and datacode = @v_datacode	SET @V_datasubcode = 0		update gentables_ext set gentext1 = 'Pending_icon.png' where tableid =  522 AND datacode = @v_datacode	SELECT @v_classcode = datasubcode , @v_itemtype = datacode from subgentables where tableid = 550 and qsicode = 43	IF @v_classcode<> 0  BEGIN exec qutl_insert_gentablesitemtype 522, @v_datacode,  @v_datasubcode, 0,@v_itemtype, @v_classcode,@v_error_code OUTPUT, @v_error_desc OUTPUT END	IF @v_error_code <> 0  print 'datacode = ' + CAST(@v_datacode AS varchar)+ ', datasubcode = ' + CAST(@v_datasubcode AS varchar) +', error message =' + @v_error_desc	IF @v_error_code = 0 BEGIN update gentablesitemtype set sortorder = 1 where tableid = 522 AND datacode = @v_datacode AND datasubcode = @v_datasubcode AND itemtypecode = @v_itemtype AND itemtypesubcode = @v_classcode END


  END
  GO

